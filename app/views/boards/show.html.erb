<% if flash[:notice] %>
  <p id="notice"><%= flash[:notice] %></p>
<% end %>

<%= link_to "New note", new_note_path(board_id: @board.id) %> <br>

<div class="row">
	<% @applications.each_with_index do |stage, index| %>
	<div class="col s3">
		<div class="card blue-grey darken-1">
			<div class="card-content white-text" style="padding: 5px 20px">
				<span class="card-title"><%= @stages[index] %></span>
				<a href="#application-new-modal" class="application-new-modal-trigger" data-stage="<%= @stages[index] %>" data-stage_num="<%= index+1 %>"><i class="material-icons card-title right">add</i></a>
			</div>
		</div>

		<% stage.each do |application| %>
		<div class="card teal">
			<div class="card-content white-text">
				<span class="card-title white-text"><%= link_to application.company.name, application %></span>
				<p><%= application.company.location %></p>
				<!-- <a class="right"><i class="material-icons white-text">add</i></a> -->
				<div class="right">
					<a href="#application-edit-modal" class="application-edit-modal-trigger" data-application_id="<%= application.id %>"><i class="material-icons card-title">edit</i></a>
					<a href="#interaction-new-modal" class="interaction-new-modal-trigger" data-application_id="<%= application.id %>"><i class="material-icons card-title">add</i></a>
				</div>
			</div>
		</div>
		<% end %>
	</div>
	<% end %>
</div>

<div class="header-board">
	<div class="row">

		<h4 class="col s4 white-text">
			<%= form_for @board do |f| %>
				<%= f.text_field :title %>
			<% end %>
		</h4>
		<div class="col s2 offset-s6">
			<%= link_to 'add', "#board-new-modal", :class => "material-icons board-new-modal-trigger" %>
			<%= link_to 'more_vert', "#board-change-modal", :class => "material-icons board-change-modal-trigger" %>
			<%= link_to 'delete', @board, method: :delete, data: { confirm: 'Are you sure?' }, :class => "material-icons" %>
		</div>
	</div>
</div>

<div id="board-change-modal" class="modal modal-fixed-footer">
	<div class="modal-content">
		<h4>Change Boards</h4>
		<% @boards.each do |board| %>
		<p class="model-options <%= (board.id == @board.id) ? "selected" : "" %>"><%= link_to board.title, board %><p>
		<% end %>
	</div>
	<div class="modal-footer">
		<a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Cancel</a>
	</div>
</div>

<div id="application-new-modal" class="modal modal-fixed-footer">
	<%= render 'applications/new' %>
</div>

<div id="application-edit-modal" class="modal modal-fixed-footer">
	<%= render 'applications/edit' %>
</div>

<div id="interaction-new-modal" class="modal modal-fixed-footer">
	<%= render 'interactions/new' %>
</div>

<div id="board-new-modal" class="modal modal-fixed-footer">
	<%= form_for Board.new do |f| %>
	<div class="modal-content">
		<h4>Create New Board</h4>
		<div class="row">
			<div class="input-field col s12">
				Title: <%= f.text_field :title %>
			</div>
		</div>
	</div>
	<div class="modal-footer">
		<a class="modal-action modal-close waves-effect waves-green btn-flat" href="#!">
			<%= f.submit %>
		</a>
	</div>
	<% end %>
</div>
